---
title: Pastebin
tags: [System Design]
style:
color:
description: Users of the service will enter a piece of text and get a randomly generated URL to access it.
---
User가 일반 text를 저장할 수 있는 웹 서비스를 설계해보자.<br><br>

### Pastebin 이란 무엇인가

Pastebin 서비스는 User가 인터넷을 통해 일반 텍스트나 이미지를 저장하고, 업로드된 데이터에 엑세스 할 수 있는 고유한 URL을 생성할 수 있도록 한다. User들은 다른 User들이 볼 수 있도록 URL을 넘겨주기만 하면 되기때문에 네트워크를 통해 데이터를 빠르게 공유하는데 사용된다.<br><br>

<a href="http://Pastebin.com" target="_blank_">Go Pastebin </a>

### 시스템 요구사항 및 목표

다음과 같은 요구사항을 충족해야 한다. : <br><br>

**기능 요구 사항:**<br><br>

> 1. User들은 데이터를 업로드하거나 붙여넣기를 할 수 있어야 하며 데이터에 엑세스 할 수 있는 고유한 URL을 얻어야 한다.
> 2. User들은 텍스트만 업로드 할 수 있다.
> 3. 데이터와 링크는 특정 시간대가 지나면 자동으로 만료된다. User들은 만료 시간도 지정할 수 있어야 한다.
> 4. User들은 선택적으로 붙여넣기용 사용자 지정 alias를 선택할 수 있어야 한다.

**비기능적 요구 사항:**<br><br>

> 1. 시스템은 매우 신뢰할 수 있어야 하며, 업로드 된 데이터는 모두 손실 되어서는 안 된다.
> 2. 시스템은 가용성이 높아야 한다. 우리 서비스가 중단되면 User들이 그들의 Pastes에 접근할 수 없기 때문에 이 것은 꼭 필요하다.
> 3. User들은 minimum latency로 real-time으로 Pastes에 access할 수 있어야 한다.
> 4. Pastes 링크들은 추측할 수 없어야 한다.(예측할 수 없다.)

**확장성 요구 사항**<br><br>

> 1. 분석(예를들어 얼마나 많이 Pastes에 액세스 하였는가?)
> 2. 우리의 서비스는 다른 서비스들이 REST API를 통해 접근할 수 있어야 한다.

### 설계시 몇 가지 고려 사항
Pastebin은 URL 단축서비스와 몇가지 요구사항이 같지만, 우리가 유념해야 될 추가 설계 고려 사항들이 있다.<br><br>

**User가 한 번에 붙여넣기 할 수 있는 텍스트 양의 제한은 어느정도일까?** 우리는 서비스 남용을 막기 위해 user들이 10MB이상의 Paste를 갖지 못하도록 제한 할 수 있다.<br><br>

**사용자 지정 URL에 크기 제한을 적용해야 하는가?** 우리 서비스는 사용자 지정 URL을 지원하므로 User가 원하는 URL을 선택할 수 있지만 사용자 지정 URL을 꼭 제공해야 하는 것은 아니다. 단, 사용자 지정 URL에 대한 크기를 제한을 두는 것이 합리적이며(and often desirable) 일관된 URL 데이터 베이스를 갖출 수 있도록 한다.<br><br>

### 시스템 APIs
우리는 SOAP 또는 REST API를 통해 서비스의 기능을 노출시킬 수 있다. 다음은 Pastes를 create/retrieve/delete하기위한 API 정의다.<br><br>

~~~Java
addPaste(apiDevKey,pasteData,customUrl=None,userName=None,pasteName=None,expireDate=None)
~~~
**Parameters**<br>
apiDevKey(String): 등록된 계정의 API 개발자 키, 이것은 무엇보다도 할당된 할당량에 기초하여 사용자를 조절하는것에 사용될 것이다.<br>
pasteData(String):paste 텍스트 데이터<br>
customUrl(String):선택적 사용자 지정 URL<br>
userName(String):URL을 생성하는 데 사용할 선택적 사용자 이름<br>
pasteName(String):Paste 이름(선택사항)<br>
expireDate(String):Paste 만료 날짜(선택사항)<br><br>

**Returns : (String)** <br>
Insertion에 성공하면 Paste를 할 수 있는 URL이 반환되고 그렇지 않으면 오류코드가 반환된다.<br><br>

마찬가지로 Paste API를 검색할 수 있다.<br><br>
~~~Java
getPaste(apiDevKey,apiPasteKey)
~~~
여기에서 apiPasteKey는 검색할 Pastes 키를 나타내는 문자열이다. 이 API는 Paste 텍스트 데이터를 반환한다.<br><br>
~~~Java
deletePaste(apiDevKey,apiPasteKey)
~~~
삭제를 성공하게 되면 'true'를 반환하고 그렇지 않으면 'false'를 반환한다.<br><br>
